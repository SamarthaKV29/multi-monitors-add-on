and rewritten from scratch for gnome-shell version 3.10.4.  Adds panels 
and thumbnails for additional monitors. Settings changes are applied 
in dynamic fashion, no restart needed.

# Multi Monitors Add-On

An extension that adds multiple monitors overview and panel for GNOME Shell.

Extension inspired by https://github.com/darkxst/multiple-monitor-panels and rewritten from scratch for GNOME Shell 3.10.4 and later. Adds panels and thumbnails for additional monitors. Settings changes are applied in dynamic fashion, no restart needed.

## Versions

- Branch [master](https://github.com/realh/multi-monitors-add-on/tree/master) contains extension for GNOME 42
- Branch [gnome-3-32_3-36](https://github.com/spin83/multi-monitors-add-on/tree/gnome-3-32_3-36) contains extension for GNOME 3.32, 3.34 and 3.36
- Branch [gnome-3-24_3-30](https://github.com/spin83/multi-monitors-add-on/tree/gnome-3-24_3-30) contains extension for GNOME 3.24, 3.26, 3.28 and 3.30
- Branch [gnome-3-20_3-22](https://github.com/spin83/multi-monitors-add-on/tree/gnome-3-20_3-22) contains extension for GNOME 3.20 and 3.22
- Branch [gnome-3-16_3-18](https://github.com/spin83/multi-monitors-add-on/tree/gnome-3-16_3-18) contains extension for GNOME 3.16 and 3.18
- Branch [gnome-3-14](https://github.com/spin83/multi-monitors-add-on/tree/gnome-3-14) contains extension for GNOME 3.14
- Branch [gnome-3-10](https://github.com/spin83/multi-monitors-add-on/tree/gnome-3-10) contains extension for GNOME 3.10

## Installation from git

```bash
git clone git://github.com/realh/multi-monitors-add-on.git
cd multi-monitors-add-on
cp -r multi-monitors-add-on@spin83 ~/.local/share/gnome-shell/extensions/
```

Restart the shell and then enable the extension. (Press Alt+F2 and type r to restart shell)

## Recent Fixes

### Fixed "+" Button in Preferences Dialog
If you were experiencing issues with the "+" button not working in the preferences dialog, you can install the fix by running:

```bash
cd ~/Projects/gnome-shell/multi-monitors-add-on/multi-monitors-add-on@spin83/
chmod +x install-fixes.sh
./install-fixes.sh
```

### Window Workspace Organization
The extension now preserves window-to-workspace mappings when GNOME Shell restarts or when the extension is enabled/disabled. This prevents windows from collecting on a single workspace after restart.

## Usage Guide

See the [USAGE_GUIDE.md](multi-monitors-add-on@spin83/USAGE_GUIDE.md) file for detailed instructions on:
- Working with multiple static workspaces
- Transferring indicators to additional monitors
- Troubleshooting common issues

## Debugging and Troubleshooting

### How to View Extension Logs

When troubleshooting issues with the Multi Monitors extension, especially indicator transfers, you can view the logs with:

```bash
journalctl -f -o cat /usr/bin/gnome-shell
```

This will show real-time logs from GNOME Shell, including the ones generated by this extension.

### Troubleshooting Indicator Transfers

If indicators aren't showing up on secondary monitors after adding them in preferences:

1. **Check Available Indicators**:
   - Make sure the indicator you're trying to transfer actually exists in the main panel
   - Some indicators might have names that don't match what you see (e.g., "KStatusNotifierItem" instead of "Dropbox")

2. **Restart the Shell**:
   - After adding indicators, try restarting GNOME Shell (Alt+F2, type 'r', press Enter)
   - This will reload everything cleanly

3. **Check the Logs**:
   - Look for log entries like "Adding indicator X to transfers" and "Transferred indicator X to monitor Y"
   - Any errors during the transfer process will be logged

4. **Fix for Non-showing Indicators**:
   If indicators are in the list but not showing up:
   ```javascript
   // To test in Looking Glass (Alt+F2, type 'lg', press Enter)
   // List all status area indicators
   Object.keys(Main.panel.statusArea)
   // Manually transfer an indicator to monitor 0
   let ind = 'indicatorName';  // Use one from the list above
   let cont = Main.panel.statusArea[ind].container;
   cont.unparent();
   Main.mmPanel[0]._rightBox.add_child(cont);
   ```

### Common Issues

1. **Newly Added Apps**: Some indicators may only appear after the app is launched, so make sure the app is running.
2. **Indicators Missing from Available List**:
   - The extension might not be detecting all potential indicators
   - Check your logs for the available indicators list
3. **Indicators Disappear After Reboot**:
   - This should be fixed now with the transfer system
   - If it still happens, the settings might not be saving properly

### Manual Reset

If things get completely stuck, you can reset the extension settings:

```bash
dconf reset -f /org/gnome/shell/extensions/multi-monitors-add-on/
```

This will clear all settings back to defaults.

## Testing and Development

### Restarting the Extension After Changes

When you make changes to the extension code, you need to restart GNOME Shell and reload the extension:

1. **Restart GNOME Shell:**
   - Press `Alt+F2` and type `r`, then press Enter
   - Or log out and log back in

2. **Disable and re-enable the extension:**
   ```bash
   # Disable the extension
   gnome-extensions disable multi-monitors-add-on@spin83
   # Re-enable the extension
   gnome-extensions enable multi-monitors-add-on@spin83
   ```

3. **Check extension status:**
   ```bash
   gnome-extensions list --enabled | grep multi-monitors
   ```

### Viewing Extension Logs

To debug issues or see log output from the extension:

```bash
# View GNOME Shell logs in real-time
journalctl -f -o cat /usr/bin/gnome-shell

# Or use the looking glass (Alt+F2, type 'lg')
# Then check the "Extensions" tab for error messages
```

### Quick Development Workflow

For rapid testing during development:

```bash
# Make your changes, then run:
gnome-extensions disable multi-monitors-add-on@spin83 && \
gnome-extensions enable multi-monitors-add-on@spin83
```

**Note:** Some changes may require a full GNOME Shell restart (`Alt+F2` â†’ `r`) rather than just disabling/enabling the extension.

## License

This extension is distributed under the GNU General Public License, version 2 or later.
